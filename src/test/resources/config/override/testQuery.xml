<?xml version="1.0" encoding="UTF-8"?>
<beans 
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <bean id="insertTestmodel" name="insertTestmodel"
    class="org.springframework.jdbc.core.simple.SimpleJdbcInsert">
    <constructor-arg ref="dataSource"></constructor-arg>
    <property name="tableName" value="testmodel"></property>
    <property name="generatedKeyNames" value="id"></property>
  </bean>
    
    <bean id="jdbcTemplateTestmodel" name="jdbcTemplateTestmodel"
    class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource"></constructor-arg>
  </bean>
    
  <bean id="TestmodelDao" name="TestmodelDao"
    class="com.rapidbackend.socialutil.dao.TestmodelDao">
    <property name="tableName" value="testmodel"></property>
    <property name="jdbcTemplate" ref="jdbcTemplateTestmodel"></property>
    <property name="simpleJdbcInsert" ref="insertTestmodel"></property>
    <property name="typeFinder" ref="TestQueryTypeFinder"></property>
  </bean>
  
  <bean id="TestQueryTypeFinder" class="com.rapidbackend.socialutil.dao.TypeFinderForQueryTest">
    
  </bean>
  
  <bean id="QueryTestmodelSchema" class="com.rapidbackend.core.request.RequestSchema">
  <property name="requiredParams" value="modelQuery"></property>
  <property name="optionalParams" value="start,pageSize,idOrder"></property>
  <property name="autowireModelPropertyAsParam" value="true"></property>
  <property name="modelName" value="Testmodel"></property><!-- this property must be set if autowireModelPropertyAsParam's been set to true -->
  <property name="modelTypeFinder" ref="TestQueryTypeFinder"></property><!-- this property must be set if autowireModelPropertyAsParam's been set to true -->
  </bean>
  
  <bean id="QueryTestmodelPipeline" class="com.rapidbackend.core.process.StandardPipeline">
    <property name="handlers">
        <list>
             <ref bean="QueryTestmodelHandler"></ref>   
        </list>
    </property>
  </bean>
  
  <bean id="QueryTestmodelHandler" class="com.rapidbackend.socialutil.process.handler.db.QueryDbRecordHandler">
    <property name="dao" ref="TestmodelDao"></property>
  </bean>
  
</beans>