<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Install Rapidbackend</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="css/bootstrap.css" />
        <link rel="stylesheet" href="css/bootstrap-responsive.css" />
        <link rel="stylesheet" href="css/docs.css" />
        <link rel="stylesheet" href="css/admin.css" />
        
    </head>
    <body data-spy="scroll" data-target=".bs-docs-sidebar">
        <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="https://github.com/CharlieChiu/rapidbackend">Sources On Github</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="https://github.com/CharlieChiu/rapidbackend">Sources On Github</a>
              </li>
              <li class="active">
                <a href="./installhome.html">Install</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <header class="jumbotron subhead" id="overview">
    <div class="container">
    <h1>Install Panel</h1>
    <p class="lead">Be careful. Installation will reinstall everything on your machine, including database, classes, and data cleaning</p>
    </div>
    </header>



        <div id="content">
            
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span8">
                        <div class="manual">
                            <h5>Introduction to data structures:</h5>
                            <p>In Rapidbackend, all the data are stored as objects which are subclasses of com.rapidbackend.core.model.DbRecord. DbRecord has three default fields: 'id','created','modified' . 
                               'id' is a unique integer generated by System automatically and is also indexed. 'created' and 'modified' are Long format unix timestamps</p>
                            <p>Rapidbackend has the following default data models:<br/>
                                feedsource,oauthapplication,oauthapplicationuser,oauthtokenassociation,fileuploaded,user,feedbyuser,userfeedcontent,and usersubscription. 
                                Among the  default data models above, for now, only fileuploaded,user,userfeedcontent supports append user customed fields.
                                You can find the detailed desprition to those tables in the 'Reserved Models' tab below.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span8">
                        
                        
                        <div >
                            <ul id="tableTab" class="nav nav-tabs">
                                <li class="active">
                                    <a data-toggle="tab" href="#databaseConfig">Database Config</a>
                                </li>
                                <li class="">
                                    <a data-toggle="tab" href="#reservedModels">Reserved Models</a>
                                </li>
                                <li class="">
                                    <a data-toggle="tab" href="#addFollowables">Add Followables</a>
                                </li>
                                <li class="">
                                    <a data-toggle="tab" href="#userDefinedModels">Add Your own models</a>
                                </li>
                            </ul>

                            <div id="tabContent" class="tab-content">

                                <div id="databaseConfig" class="tab-pane fade">
                                    
                                </div>

                                <div id="reservedModels" class="tab-pane fade active in">
                                    
                                </div>

                                <div id="addFollowables" class="tab-pane fade">
                                    <p>The default 'followable' is 'user' . By creating different followabes, you can create different kinds of social applications.<br/> 
                                       Rapidbackend will create one timeline for every 'followable'. If user follows a 'followable', 
                                        then all the feeds created within this followable will be pushed into user's timeline page .</p>
                                    <div>
                                        Reservd followable: 'User':
                                    </div>
                                    
                                </div>
                                <div id="userDefinedModels" class="tab-pane fade">
                                    <p>
                                        You can create your own model types here. For example, you can create model type 'City'. Then after the installation, you will have your class 'City'
                                        created and a corresponding data table 'City' created. Also, a set of standard commands agianst this kind of model will be created too:) For now, they are:
                                        CreateCity,DeleteCity,UpdateCity,ReadCity,QueryCity. You can check the document for detailed description of those commands.  
                                    </p>
                                    <button class="addNewModel btn btn-success">Add New Model</button>
                                </div>
                             </div>
                            </div>

                        </div>
                        
                    </div>

             
                
                </div>
               
 
    
                
                
            </div>
        <div class="navbar navbar-inverse navbar-inner">
                 <button id="submitBtn" class="btn btn-primary">Install Now</button>
                 <button id="clearResponse" class="btn btn-primary">Clear Information</button>
                 <div class="row-fluid serverResponse">
        <div class="span5">
            <div class="control-group">
                <label class="control-label"> Install Information:</label>
                <div class="controls">
                    <div id="installInfo" class="installInfo"></div>
                </div>
            </div>
        </div>
    </div>
             </div> 
        <script id="newModelTemplate" type="text/template">
                                            <div class="control-group">
                                                <label class="control-label">Model Name</label>
                                                <div class="controls userDefinedModel">
                                                    <input type="text" value="" class="modelName notNull">
                                                    <h5><span class="modelName"></span></h5>
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>field name</th>
                                                                <th>data type</th>
                                                                <th>not null</th>
                                                                <th>create index</th>
                                                                <th>unique</th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr class="modelField">
                                                                <td class="fieldName">id
                                                                </td>
                                                                <td class="dataType">int
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr class="modelField">
                                                                <td class="fieldName">created
                                                                </td>
                                                                <td class="dataType">long
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr class="modelField">
                                                                <td class="fieldName">modified
                                                                </td>
                                                                <td class="dataType">long
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <button class="addField btn btn-mini">Add Model Field</button>
                                                </div>
                                                <button class="removeNewModel btn btn-danger">Remove this Model</button>
                                                <button class="addNewModel btn btn-success">Add New Model</button>
                                            </div>
        </script>
        
        <script id="reservedModelTemplate" type="text/template">
            <div class="reservedModel widget-box">
            <h5><span class="modelName">{{modelName}}</span></h5>
            <table class="table">
            <thead>
                <tr>
                    <th>field name</th>
                    <th>data type</th>
                    <th>not null</th>
                    <th>create index</th>
                    <th>unique</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            {{#defaultColumn}}
                <tr class="dbColumn">
                    <td class="columnName">
                        {{name}}
                    </td>
                    <td class="dataType">
                        {{type}}
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            {{/defaultColumn}}
            {{#reservedColumn}}
                <tr class="dbColumn">
                    <td class="columnName">
                        {{name}}
                    </td>
                    <td class="dataType">
                        {{type}}
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
    <td></td>
                </tr>
            {{/reservedColumn}}
            </tbody>
        </table>
            {{#supportsAddField}}
            <button class="addField btn btn-mini">Add Model Field</button>
            {{/supportsAddField}}
            </div>
        </script>
        <script type="text/template" id="followableTemplate">
                                    <div class="followable">
                                        {{#removeFollowable}}<button class="removeFollowable btn btn-danger">Remove this followable</button>{{/removeFollowable}}
                                        <div class="followableModel">
                                            <div class="control-group">
                                                <label class="control-label">FollowableName</label>
                                                <div class="controls">
                                                    <input type="text" class="followableName notNull" {{#disableFollowableName}}value="user" disabled="disabled" {{/disableFollowableName}}/>
                                                    <h5><span class="followableModelName">{{followableModelName}}</span></h5>
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>field name</th>
                                                                <th>data type</th>
                                                                <th>not null</th>
                                                                <th>create index</th>
                                                                <th>unique</th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {{#followableModel.defaultColumn}}
                                                            <tr class="modelField">
                                                                <td class="fieldName">{{name}}
                                                                </td>
                                                                <td class="dataType">{{type}}
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            {{/followableModel.defaultColumn}}
                                                            {{#followableModel.reservedColumn}}
                                                            <tr class="modelField">
                                                                <td class="fieldName">{{name}}
                                                                </td>
                                                                <td class="dataType">{{type}}
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            {{/followableModel.reservedColumn}}
                                                        </tbody>
                                                    </table>
                                                    {{#supportsAddField}}
                                                    <button class="addField btn btn-mini">Add Model Field</button>
                                                    {{/supportsAddField}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="followableFeedContent">
                                            <div class="control-group">
                                                <!-- commentout will support forkfollowable in future release
                                                <label class="control-label">Refer To Another existing Followable's feedContent( which means we will not create a seperate feedcontent table to store the feedcontent of this followable, we only stores the feed ids in this followable's {#followable}feed table.
                                                    otherwise a new {#follableName}feedcontent model will be created)</label>
                                                <div class="controls">
                                                    <input type="checkbox" class ="referToAnotherFollowablesFeedCheckBox" {{#disableFollowableFeedContentName}}disabled="disabled"{{/disableFollowableFeedContentName}} >Refer To Another existing Followable's feedContent, Followable Name:</input>
                                                    <input type="text" class="referringToFollowable" {{#disableFollowableFeedContentName}}disabled="disabled"{{/disableFollowableFeedContentName}} />
                                                </div>-->
                                                <h5><span class="followableFeedContentModelName">{{followableFeedContentModelName}}</span></h5>
                                                <div class="modelTable">
                                                <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>field name</th>
                                                                <th>data type</th>
                                                                <th>not null</th>
                                                                <th>create index</th>
                                                                <!--<th>unique</th>-->
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {{#feedContentModel.defaultColumn}}
                                                            <tr class="modelField">
                                                                <td class="fieldName">{{name}}
                                                                </td>
                                                                <td class="dataType">{{type}}
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            {{/feedContentModel.defaultColumn}}
                                                            {{#feedContentModel.reservedColumn}}
                                                            <tr class="modelField">
                                                                <td class="fieldName">{{name}}
                                                                </td>
                                                                <td class="dataType">{{type}}
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            {{/feedContentModel.reservedColumn}}
                                                        </tbody>
                                                    </table>
                                                    {{#supportsAddField}}
                                                    <button class="addField btn btn-mini">Add Model Field</button>
                                                    {{/supportsAddField}}
                                                    </div>
                                            </div>
                                        </div>
                                        <div class="feedComment">
                                            <div class="control-group">
                                                <h5><span class="followableFeedCommentModelName">{{followableFeedCommentModelName}}</span></h5>
                                                <div class="modelTable">
                                                <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>field name</th>
                                                                <th>data type</th>
                                                                <th>not null</th>
                                                                <th>create index</th>
                                                                <!--<th>unique</th>-->
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {{#feedCommentModel.defaultColumn}}
                                                            <tr class="modelField">
                                                                <td class="auto-style2">{{name}}
                                                                </td>
                                                                <td class="auto-style3">{{type}}
                                                                </td>
                                                                <td class="auto-style3"></td>
                                                                <td class="auto-style3"></td>
                                                                <td class="auto-style3"></td>
                                                                <td class="auto-style3"></td>
                                                            </tr>
                                                            {{/feedCommentModel.defaultColumn}}
                                                            {{#feedCommentModel.reservedColumn}}
                                                            <tr class="modelField">
                                                                <td class="fieldName">{{name}}
                                                                </td>
                                                                <td class="dataType">{{type}}
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            {{/feedCommentModel.reservedColumn}}
                                                        </tbody>
                                                    </table>
                                                    {{#supportsAddField}}
                                                    <button class="addField btn btn-mini">Add Model Field</button>
                                                    {{/supportsAddField}}
                                                    </div>
                                            </div>
                                        </div>
                                        {{#showRemoveFollowable}}<button class="removeFollowable btn btn-danger">Remove Followable</button>{{/showRemoveFollowable}}
                                        <button class="addNewFollowable btn btn-success">Add New Followable</button>
                                    </div>
        </script>
        <script id="rowTemplate" type="text/template">
        <tr class="modelField control-group customedField">
                <td>
                    <input type="text" class="fieldName notNull" />
                </td>
                <td>
                    <select class="dataTypeSelector">
                        <option value="int">int</option>
                        <option value="long">long</option>
                        <option value="varchar">varchar</option>
                        <option value="float">float</option>
                        <option value="text">text</option>
                    </select>
                </td>
                <td>
                    <input type="checkbox" class="dataType-checkbox notnullField" />
                </td>
                <td>
                    <input type="checkbox" class="dataType-checkbox indexField" />
                </td>
                <td>
                    <input type="checkbox" class="dataType-checkbox uniqueField" />
                </td>
                <td onclick="$(this).parent().remove();">
                    <i class="icon-remove"></i>
                </td>
            </tr>
        </script>
        <script type="text/template" id="databaseTemplate">
            <div class="control-group">
                <label class="control-label">dbName</label>
                <div class="controls">
                    <input type="text" name="dbName" id="dbName" class="notNull">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">dbUri(should begin with 'jdbc:mysql://')</label>
                <div class="controls">
                    <input type="text" name="dbUri" id="dbUri" class="notNull">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">username</label>
                <div class="controls">
                    <input type="text" name="username" id="username" class="notNull">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">password</label>
                <div class="controls">
                    <input type="text" name="password" id="password" class="notNull">
                </div>
            </div>
        </script>
            <script src="js/jquery.js"></script>
            <script src="js/jquery.ui.custom.js"></script>
            <script src="js/jquery.flot.js"></script>
            <script src="js/jquery.flot.resize.js"></script>
            <script src="js/jquery.peity.js"></script>
            <script src="js/bootstrap.min.js"></script>
            <script src="js/mustache.js"></script>
            <script src="js/datamodel.js"></script>
                
        <script type="text/javascript">
            //var feedSourceTable = createReservedTable(feedSource);
            var pathName = window.location.pathname;
            if (!pathName.match(/currentConfig.html$/)) {
                $(reservedTables).each(function () {
                    $("#reservedModels").append(createReservedTable(this));
                });

                $("#addFollowables").append(followableUserDiv);
                $("#databaseConfig").append(createDatabaseConfigTable);
            }
            
            
            $('#tableTab a[href="#reservedModels"]').tab('show');
            $('#tableTab a[href="#addFollowables"]').tab('show');
            
            $("#submitBtn").click(submitConfig);
            $("#clearResponse").click(function () { $("#installInfo").html("") });
            registerEvents();
        </script>
        
    </body>
</html>
